<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/WD-html-in-xml/DTD/xhtml1-strict.dtd">
<html><head><title>Castor JDO - Configuration</title><link rel="stylesheet" href="default.css"></head><body bgcolor="#ffffff" link="#6763a9" vlink="#6763a9" topmargin="0" bottommargin="0" leftmargin="0" marginheight="0" marginwidth="0"><a name="top"></a><table border="0" cellpadding="0" cellspacing="0" height="400"><tr><td width="10" valign="top" align="left" bgcolor="#7270c2"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="125" valign="top" align="left" bgcolor="#7270c2"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="7" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="70" height="6" border="0"></td><td width="468" valign="top" align="left"><img src="images/top_2.gif" width="468" height="6" border="0"></td><td width="120" valign="top" align="left"><img src="images/line_purple.gif" width="120" height="6" border="0"></td></tr><tr><td width="10" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="125" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td><td width="7" bgcolor="#ffffff" valign="top" align="left"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="1" border="0"></td><td width="468" valign="middle" align="left"><a href="http://www.codehaus.org"><span class="menuTopOff">Codehaus</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.exolab.org"><span class="menuTopOff">ExoLab</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openejb.codehaus.org"><span class="menuTopOff">OpenEJB</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openjms.sf.net"><span class="menuTopOff">OpenJMS</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://openorb.sf.net"><span class="menuTopOn">OpenORB</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://castor.codehaus.org"><span class="menuTopOff">Castor</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://tyrex.sf.net"><span class="menuTopOff">Tyrex</span></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br><img src="images/dotTrans.gif" width="1" height="2" border="0"></td><td width="120" height="20" valign="top" align="left">&nbsp;</td></tr><tr><td width="10" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="10" height="3" border="0"></td><td width="125" bgcolor="#7270c2" valign="top" align="right"><img src="images/line_sm.gif" width="105" height="3" border="0"></td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/line_sm.gif" width="7" height="3" border="0"></td><td width="70" valign="top" align="left"><img src="images/line_light.gif" width="70" height="3" border="0"></td><td width="468" valign="top" align="left"><img src="images/line_light.gif" width="468" height="3" border="0"></td><td width="120" valign="top" align="left"><img src="images/dotTrans.gif" border="0" width="1" height="1"></td></tr><tr><td bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="10" height="10" border="0"></td><td width="125" bgcolor="#7270c2" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="2" border="0"><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Main</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="index.html"><span class="subMenuOff">Home</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="about.html"><span class="subMenuOff">About</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="features.html"><span class="subMenuOff">Features</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="download.html"><span class="subMenuOff">Download</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="api/overview-summary.html"><span class="subMenuOff">API</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="schema.html"><span class="subMenuOff">Schema</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="http://castor.exolab.org/phpBB2"><span class="subMenuOff">Castor Forums</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="lists.html"><span class="subMenuOff">Mailing Lists</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="cvs.html"><span class="subMenuOff">CVS / JIRA</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="support.html"><span class="subMenuOff">Support</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="http://www.brainopolis.com/castorwiki/Wiki.jsp?page=Main"><span class="subMenuOff">CastorWiki</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="http://castor.codehaus.org/rss/castor-announce.xml"><span class="subMenuOff">RSS news feed</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">XML</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="xml-framework.html"><span class="subMenuOff">Using XML</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="sourcegen.html"><span class="subMenuOff">Source Generator</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="xmlschema.html"><span class="subMenuOff">Schema Support</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="xml-mapping.html"><span class="subMenuOff">XML Mapping</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="xml-faq.html"><span class="subMenuOff">XML FAQ</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="xml-fieldhandlers.html"><span class="subMenuOff">Custom Handlers</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">JDO</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-introduction.html"><span class="subMenuOff">Introduction</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo.html"><span class="subMenuOff">Using JDO</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="database-conf.html"><span class="subMenuOff">JDO Config</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="types.html"><span class="subMenuOff">Types</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-mapping.html"><span class="subMenuOff">JDO Mapping</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-faq.html"><span class="subMenuOff">JDO FAQ</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-examples.html"><span class="subMenuOff">JDO Examples</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-howto.html"><span class="subMenuOff">JDO How-Tos</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-best-practice.html"><span class="subMenuOff">JDO Best Pract.</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-other-features.html"><span class="subMenuOff">Other Features</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">Advanced JDO</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="oql.html"><span class="subMenuOff">OQL</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="locking.html"><span class="subMenuOff">Trans. &amp; Locks</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="design-persist.html"><span class="subMenuOff">Design</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="key-generator.html"><span class="subMenuOff">KeyGen</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="long-transact.html"><span class="subMenuOff">Long Trans.</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="nested-attr.html"><span class="subMenuOff">Nested Attrs.</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="pooling.html"><span class="subMenuOff">Pooling Examples</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="postgresql-blobs.html"><span class="subMenuOff">LOBs</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="jdo-best-practice.html"><span class="subMenuOff">Best practice</span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">More</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="presentations.html"><span class="subMenuOff">Presentations</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="examples.html"><span class="subMenuOff">The Examples</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="extras.html"><span class="subMenuOff">3rd Party Tools</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="test-framework.html"><span class="subMenuOff">JDO Tests</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="ctf.html"><span class="subMenuOff">XML Tests</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="conf-lib.html"><span class="subMenuOff">Configuration</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="tips-tricks.html"><span class="subMenuOff">Tips &amp; Tricks</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="javadoc/overview-summary.html"><span class="subMenuOff">Full JavaDoc</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="http://www.brainopolis.com/castorwiki/Wiki.jsp?page=Main"><span class="subMenuOff">CastorWiki</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href><span class="subMenuOff"></span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="http://www.java.net/"><span class="subMenuOff"><img src="images/javanet_button_90.gif" border="0"></span></a></td></tr></table><br><table border="0" cellpadding="0" cellspacing="0"><tr><td valign="top" align="left"><span class="subMenuOn">About</span></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="license.html"><span class="subMenuOff">License</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="contributors.html"><span class="subMenuOff">Contributors</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="marketplace.html"><span class="subMenuOff">Marketplace</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="status.html"><span class="subMenuOff">Status, Todo</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="release-notes.html"><span class="subMenuOff">Changelog</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="library.html"><span class="subMenuOff">Library</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="contacts.html"><span class="subMenuOff">Contact</span></a></td></tr><tr><td valign="top" align="left">&nbsp;&nbsp;<a href="origins.html"><span class="subMenuOff">Project Name</span></a></td></tr></table><br></td><td width="7" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" valign="top" align="left">&nbsp;</td><td rowspan="4" width="468" valign="top"><table cols="2" rows="2" border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td valign="top" align="left"><br><img border="0" height="34" hspace="0" src="images/castor.gif" vspace="0" width="115"><br><img border="0" height="10" hspace="0" src="images/dotTrans.gif"></td><td width="120" height="5" valign="top" align="right"><a href="http://www.exolab.org"><img src="images/logo_exolab.gif" hspace="0" vspace="10" width="77" height="20" border="0"></a></td></tr></table><p></p><p></p><br><h2 align="center">Castor JDO - Configuration</h2><HR size="1"><span class="bodyGrey"><b><a href="#The-Castor-configuration-file">The Castor configuration file</a></b><br></span><span class="bodyGrey"><b><a href="#Transaction-demarcation">Transaction demarcation</a></b><br></span><span class="bodyGrey"><a href="#Local-Mode">&nbsp;&nbsp;&nbsp;&nbsp;Local Mode</a><br></span><span class="bodyGrey"><a href="#Global-Mode">&nbsp;&nbsp;&nbsp;&nbsp;Global Mode</a><br></span><span class="bodyGrey"><b><a href="#Sample-Configuration-File">Sample Configuration File</a></b><br></span><span class="bodyGrey"><b><a href="#Configuration-For-Various-Databases">Configuration For Various Databases</a></b><br></span><span class="bodyGrey"><b><a href="#The-JDO-Configuration-DTD">The JDO Configuration DTD</a></b><br></span><span class="bodyGrey"><b><a href="#JDOConfFactory">JDOConfFactory</a></b><br></span><HR size="1"><br><a name="The-Castor-configuration-file"><h2>The Castor configuration file</h2></a>        <p><span class="bodyGrey">The default way to configure how Castor interacts with a specific database system           is by using a configuration file. It specifies the means to obtain a connection          to the database server, the mapping between Java classes and tables          in that database server, and the service provider to use for talking          to that server (For a more flexible, programmatic way without configuration files see          section <a href="#JDOConfFactory">JDOConfFactory</a>).</span></p>        <p><span class="bodyGrey">The application will access the database(s) by its given name          (<tt>database/name</tt>) and will be able to persist all objects specified          in the included mapping file(s).</span></p>        <p><span class="bodyGrey">The <tt>engine</tt> attribute specifies the persistence engine for this          database server. Different database servers vary in the SQL syntax and          capabilites they support, and this attribute names the service provider to use.</span></p>        <p><span class="bodyGrey">The following names are supported in Castor:</span></p>           <table border="0" cellspacing="1" cellpadding="2" bgcolor="#7270c2">          <tr>             <td><span class="bodyGrey">                <table border="0" cellspacing="0" cellpadding="6" bgcolor="#ededed">                   <tr bgcolor="#7270c2" style="color:#000000">                      <th align="left">engine name</th>                      <th align="left">RDBMS</th>                   </tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">db2</span></td><td><span class="bodyGrey">DB/2</span></td></tr>                   <tr><td><span class="bodyGrey">derby</span></td><td><span class="bodyGrey">Derby</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">generic</span></td><td><span class="bodyGrey">Generic JDBC support</span></td></tr>                   <tr><td><span class="bodyGrey">hsql</span></td><td><span class="bodyGrey">Hypersonic SQL</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">informix</span></td><td><span class="bodyGrey">Informix</span></td></tr>                   <tr><td><span class="bodyGrey">instantdb</span></td><td><span class="bodyGrey">InstantDB</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">interbase</span></td><td><span class="bodyGrey">Interbase</span></td></tr>                   <tr><td><span class="bodyGrey">mysql</span></td><td><span class="bodyGrey">MySQL</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">oracle</span></td><td><span class="bodyGrey">Oracle 7 - Oracle 9i</span></td></tr>                   <tr><td><span class="bodyGrey">postgresql</span></td><td><span class="bodyGrey">PostgreSQL 7.1</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">sapdb</span></td><td><span class="bodyGrey">SAP DB / MaxDB</span></td></tr>                   <tr><td><span class="bodyGrey">sql-server</span></td><td><span class="bodyGrey">Microsoft SQL Server</span></td></tr>                   <tr bgcolor="#DEDEDE"><td><span class="bodyGrey">sybase</span></td><td><span class="bodyGrey">Sybase 11</span></td></tr>                </table>             </span></td>          </tr>       </table>        <p><span class="bodyGrey"><span class="bodyGrey">Note: Castor doesn't work with JDBC-ODBC bridge from Sun.                 In particular, MS Access is not supported.       </span></span></p>        <p><span class="bodyGrey">The means to acquire a database connection is specified in one of three          ways: as a JDBC driver URL, as a JDBC DataSource, or as a DataSource          to lookup through JNDI. When Castor is used inside a J2EE application server          it is recommended to use JNDI lookup (see the <tt>jndi</tt> element),          allowing the application server to manage connection pooling and distributed          transactions.</span></p>        <p><span class="bodyGrey">The class mapping is included from an external mapping file, allowing          multiple mappings to be included in the same database configuration, or two          databases to share the same mappings. For concurrency and integrity reasons,          two database configurations should never attempt to use overlapping mappings.          It is recommended to use one database configuration per database server.</span></p>        <p><span class="bodyGrey">The mapping file is specified using a URL, typically a <tt>file:</tt> URL.          If the database configuration file and mapping file reside in the same          directory, use a relative URL. Relative URLs also work if the database          configuration and mapping files are obtained from the application JAR and          reside in the same classpath.</span></p>        <p><span class="bodyGrey">The <tt>driver</tt> element specifies the JDBC driver for obtaining          new connections to the database server. The driver is obtained from the JDBC          <tt>DriverManager</tt> and must be located in the class path. The JDBC URL          locates the driver and provides the access properties. Additional properties          may be specified using <tt>param</tt> elements (e.g. buffer size, network          protocol, etc).</span></p>        <p><span class="bodyGrey">Use the <tt>class-name</tt> attribute to specify the driver class for          automatic registration with the JDBC <tt>DriverManager</tt>. If missing,          the driver must be registered in any other means, including properties file,          <tt>Class.forName()</tt>, etc.</span></p>              <p><span class="bodyGrey">For example, to configure an Oracle 8 thin driver, use:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;jdo-conf&gt;         
     &lt;database name=&quot;ebiz&quot; engine=&quot;oracle&quot;&gt;
        &lt;driver class-name=&quot;oracle.jdbc.driver.OracleDriver&quot;
                url=&quot;jdbc:oracle:thin:@host:port:SID&quot;&gt;
           &lt;param name=&quot;user&quot; value=&quot;scott&quot; /&gt;
           &lt;param name=&quot;password&quot; value=&quot;tiger&quot; /&gt;
        &lt;/driver&gt;
        ...
     &lt;/database&gt;
     ...
  &lt;/jdo-conf&gt;</pre></span></td></tr></table></td></tr></table><p></p></span></p>        <p><span class="bodyGrey">The <tt>data-source</tt> element specifies the JDBC DataSource for          obtaining new connections to the database server. DataSources are defined          in the JDBC 2.0 standard extension API which is included with Castor, and          implement the interface <tt>javax.sql.DataSource</tt>.</span></p>        <p><span class="bodyGrey">The DataSource implementation class name is specified by the <tt>class-name</tt>          attribute and configured through Bean-like accessor methods specified for          the <tt>param</tt> element. The DTD for the <tt>param</tt> element is undefined          and depends on the DataSource being used.</span></p>        <p><span class="bodyGrey">For example, to configure a PostgreSQL 7.1 DataSource, use:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;jdo-conf&gt;
     &lt;database name=&quot;ebiz&quot; engine=&quot;oracle&quot;&gt;
        &lt;data-source class-name=&quot;org.postgresql.PostgresqlDataSource&quot;&gt;
           &lt;param name=&quot;serverName&quot; value=&quot;host&quot; /&gt;
           &lt;param name=&quot;portNumber&quot; value=&quot;5432&quot; /&gt;
           &lt;param name=&quot;databaseName&quot; value=&quot;db&quot; /&gt;
           &lt;param name=&quot;user&quot; value=&quot;user&quot; /&gt;
           &lt;param name=&quot;password=&quot; value=&quot;secret&quot; /&gt;
        &lt;/data-source&gt;
        ...
     &lt;/database&gt;
     ...
  &lt;/jdo-conf&gt;</pre></span></td></tr></table></td></tr></table><p></p></span></p>        <p><span class="bodyGrey">The <tt>jndi</tt> element specifies the JDBC DataSource for obtaining          new connections to the database server through a JNDI lookup. The JNDI environment          naming context (ENC) is used to obtain a suitable DataSource..</span></p>        <p><span class="bodyGrey">When running inside a J2EE application server, this is the preferred method          for obtaining database connections. It enables the J2EE application server to          configure the connection, maintain a connection pool, and manage distributed          transactions.</span></p>        <p><span class="bodyGrey">For example, to specify a J2EE DataSource, use:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;jdo-conf&gt;
     &lt;database name=&quot;ebiz&quot; engine=&quot;oracle&quot;&gt;
        &lt;jndi name=&quot;java:comp/env/jdbc/mydb&quot; /&gt;
     &lt;/database&gt;
     ...
  &lt;/jdo-conf&gt;</pre></span></td></tr></table></td></tr></table><p></p></span></p>      <a name="Transaction-demarcation"><h2>Transaction demarcation</h2></a>          <p><span class="bodyGrey">As opposed to release pre 0.9.6, transaction demarcation is now configured             in the JDO configuration file. As such, the user has to specify which transaction            demarcation to use. Transactions when used with Castor JDO can either be <b>local</b>             or <b>global</b>, and you instruct Castor to use a specific mode by supplying             a <tt>&lt;transaction-demarcation&gt;</tt> element.</span></p>          <a name="Local-Mode"><h3>Local Mode</h3></a>                          <p><span class="bodyGrey">When using Castor JDO stand-alone and you want Castor to control                transaction demarcation, please use the                 <tt>&lt;transaction-demarcation&gt;</tt> element as follows:</span></p>              <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
&lt;transaction-demarcation mode=&quot;local&quot; /&gt;</pre></span></td></tr></table></td></tr></table><p></p>                    <a name="Global-Mode"><h3>Global Mode</h3></a>                          <p><span class="bodyGrey">When running inside a J2EE application server, and you want to use                global (XA) transactions, please make use the                 <tt>&lt;transaction-demarcation&gt;</tt> element as follows:</span></p>              <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
&lt;transaction-demarcation mode=&quot;global&quot;&gt;
   &lt;transaction-manager name=&quot;jndi&quot; /&gt;
&lt;/transaction-demarcation&gt;</pre></span></td></tr></table></td></tr></table><p></p>              <p><span class="bodyGrey">In this mode, the <tt>&lt;transaction-manager&gt;</tt> element specifies the                transaction manager that is used by your J2EE container to control these                 transactions.</span></p>              <p><span class="bodyGrey">The following transaction managers are supported in Castor:</span></p>           <table border="0" cellspacing="1" cellpadding="2" bgcolor="#7270c2">             <tr>                <td><span class="bodyGrey">                   <table border="0" cellspacing="0" cellpadding="6" bgcolor="#ededed">                      <tr bgcolor="#7270c2" style="color:#000000">                         <th align="left">Name</th>                         <th align="left">Description</th>                      </tr>                      <tr><td><span class="bodyGrey">jndi</span></td><td><span class="bodyGrey">TM looked up in the JNDI ENC</span></td></tr>                      <tr><td><span class="bodyGrey">websphere</span></td><td><span class="bodyGrey">IBM WebSphere 4 and previous releases</span></td></tr>                      <tr><td><span class="bodyGrey">websphere5</span></td><td><span class="bodyGrey">IBM WebSphere 5</span></td></tr>                      <tr><td><span class="bodyGrey">websphere51</span></td><td><span class="bodyGrey">IBM WebSphere 5.1</span></td></tr>                   </table>                </span></td>             </tr>          </table>              <p><span class="bodyGrey">In addition to specifying the transaction manager name, it is possible                to pass arbitrary name/value pairs to the transaction manager instance.</span></p>              <p><span class="bodyGrey"><b>Note:</b> At the moment, only the JNDI transaction manager factory                supports such an attribute. In this context, the jndiEnc attribute can be                used to specify what JNDI ENC to use to lookup the transaction manager as                shown below:</span></p>              <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;transaction-demarcation mode=&quot;global&quot;&gt;
     &lt;transaction-manager name=&quot;jndi&quot;&gt;
        &lt;param name=&quot;jndiEnc&quot; value=&quot;java:comp/env/TransactionManager&quot;/&gt;
     &lt;/transaction-manager&gt;
  &lt;/transaction-demarcation&gt;</pre></span></td></tr></table></td></tr></table><p></p>                        <a name="Sample-Configuration-File"><h2>Sample Configuration File</h2></a>        <p><span class="bodyGrey">The following configuration file uses an Oracle 8 thin JDBC driver and          three mapping files:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;jdo-conf&gt;
     &lt;database name=&quot;ebiz&quot; engine=&quot;oracle&quot;&gt;
        &lt;driver class-name=&quot;oracle.jdbc.driver.OracleDriver&quot;
                url=&quot;jdbc:oracle:thin:@machine:post:SID&quot;&gt;
           &lt;param name=&quot;user&quot; value=&quot;scott&quot;/&gt;
           &lt;param name=&quot;password&quot; value=&quot;tiger&quot;/&gt;
        &lt;/driver&gt;
        &lt;mapping href=&quot;products.xml&quot;/&gt;
        &lt;mapping href=&quot;orders.xml&quot;/&gt;
        &lt;mapping href=&quot;customers.xml&quot;/&gt;
     &lt;/database&gt;
     &lt;transaction-demarcation mode=&quot;local&quot;/&gt;
  &lt;/jdo-conf&gt;</pre></span></td></tr></table></td></tr></table><p></p></span></p>        <p><span class="bodyGrey">The following configuration file uses a connection obtained from the          J2EE application server and a single mapping file:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;jdo-conf&gt;
     &lt;database name=&quot;ebiz&quot; engine=&quot;oracle&quot;&gt;
        &lt;jndi name=&quot;java:comp/env/jdbc/mydb&quot;/&gt;
        &lt;mapping href=&quot;ebiz.xml&quot;/&gt;
     &lt;/database&gt;
     &lt;transaction-demarcation mode=&quot;global&quot;&gt;
        &lt;transaction-manager name=&quot;jndi&quot;&gt;
           &lt;param name=&quot;jndiEnc&quot; value=&quot;java:comp/env/TransactionManager&quot;/&gt;
        &lt;/transaction-manager&gt;
     &lt;/transaction-demarcation&gt;
  &lt;/jdo-conf&gt;</pre></span></td></tr></table></td></tr></table><p></p></span></p>      <a name="Configuration-For-Various-Databases"><h2>Configuration For Various Databases</h2></a>        <table border="1" cellpadding="4">         <tr>           <td><span class="bodyGrey"><b>Driver</b></span></td>           <td><span class="bodyGrey"><b>Configuration</b></span></td>         </tr>         <tr>           <td valign="top"><span class="bodyGrey" valign="top">Sybase jConnect</span></td>           <td valign="top"><span class="bodyGrey" valign="top"><span class="bodyGrey"><pre>
  &lt;data-source class-name=&quot;com.sybase.jdbc2.jdbc.SybDataSource&quot;&gt;
    &lt;param name=&quot;user&quot; value=&quot;user&quot; /&gt;
    &lt;param name=&quot;password value=&quot;secret&quot; /&gt;
    &lt;param name=&quot;portNumber&quot; value=&quot;4100&quot; /&gt;
    &lt;param name=&quot;serverName&quot; value=&quot;host&quot; /&gt;
  &lt;/data-source&gt;</pre></span></span></td>         </tr>         <tr>           <td valign="top"><span class="bodyGrey" valign="top">Oracle Thin Driver</span></td>           <td valign="top"><span class="bodyGrey" valign="top"><span class="bodyGrey"><pre>
  &lt;driver class-name=&quot;oracle.jdbc.driver.OracleDriver&quot;
          url=&quot;jdbc:oracle:thin:@host:post:SID&quot;&gt;
    &lt;param name=&quot;user&quot; value=&quot;scott&quot; /&gt;
    &lt;param name=&quot;password&quot; value=&quot;tiger&quot; /&gt;
  &lt;/driver&gt;</pre></span></span></td>         </tr>         <tr>           <td valign="top"><span class="bodyGrey" valign="top">mySQL JDBC Driver</span></td>           <td valign="top"><span class="bodyGrey" valign="top"><span class="bodyGrey"><pre>
  &lt;driver class-name=&quot;com.mysql.jdbc.Driver&quot;
          url=&quot;jdbc:mysql:/localhost:2206/test&quot;&gt;
    &lt;param name=&quot;user&quot; value=&quot;scott&quot; /&gt;
    &lt;param name=&quot;password&quot; value=&quot;tiger&quot; /&gt;
  &lt;/driver&gt;</pre></span></span></td>         </tr>         <tr>           <td valign="top"><span class="bodyGrey" valign="top">PostgreSQL</span></td>           <td valign="top"><span class="bodyGrey" valign="top"><span class="bodyGrey"><pre>
   &lt;data-source class-name=&quot;org.postgresql.PostgresqlDataSource&quot;&gt;
     &lt;param name=&quot;serverName&quot; value=&quot;host&quot; /&gt;
     &lt;param name=&quot;portNumber&quot; value=&quot;5432&quot; /&gt;
     &lt;param name=&quot;databaseName&quot; value=&quot;db&quot; /&gt;
     &lt;param name=&quot;user&quot; value=&quot;user&quot; /&gt;
     &lt;param name=&quot;password&quot; value=&quot;secret&quot; /&gt;
   &lt;/data-source&gt;</pre></span></span></td>         </tr>         <tr>           <td valign="top"><span class="bodyGrey" valign="top">InstantDB</span></td>           <td valign="top"><span class="bodyGrey" valign="top"><span class="bodyGrey"><pre>
  &lt;driver class-name=&quot;org.enhydra.instantdb.jdbc.idbDriver&quot;
          url=&quot;jdbc:idb:C:\\castor-0.8.8\\db\\test\\test.prp&quot;&gt;
    &lt;param name=&quot;user&quot; value=&quot;&quot; /&gt;
    &lt;param name=&quot;password&quot; value=&quot;&quot; /&gt;
  &lt;/driver&gt;</pre></span></span></td>         </tr>        </table>      <p><span class="bodyGrey">     <b>NOTE:</b> <br>     Besides the examples listed above, a good source of      configuraton examples are the JDO tests (<tt>src/tests/jdo</tt>).      See the XML decriptor for each database type.      </span></p>      <a name="The-JDO-Configuration-DTD"><h2>The JDO Configuration DTD</h2></a>      <p><span class="bodyGrey">For validation, the configuration file should include the following        document type definition. For DTD validation use:       <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;!DOCTYPE jdo-conf PUBLIC &quot;-//EXOLAB/Castor JDO Configuration DTD Version 1.0//EN&quot;
                            &quot;http://castor.exolab.org/jdo-conf.dtd&quot;&gt;
      </pre></span></td></tr></table></td></tr></table><p></p>       For XML Schema validation use:       <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;!DOCTYPE jdo-conf PUBLIC &quot;-//EXOLAB/Castor JDO Configuration Schema Version 1.0//EN&quot;
                             &quot;http://castor.exolab.org/jdo-conf.xsd&quot;&gt;
      </pre></span></td></tr></table></td></tr></table><p></p>       The Castor namespace URI is <tt>http://castor.exolab.org/</tt>.</span></p>        <p><span class="bodyGrey">The Castor JDO database configuration DTD is:          <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  &lt;!ELEMENT jdo-conf ( database+, transaction-demarcation )&gt;

  &lt;!ELEMENT database ( ( driver | data-source | jndi )?,
                       mapping+ )&gt;
                       
  &lt;!ATTLIST database
            name ID      #REQUIRED
            engine CDATA &quot;generic&quot;&gt;

  &lt;!ELEMENT mapping EMPTY&gt;
  &lt;!ATTLIST mapping
            href CDATA #REQUIRED&gt;

  &lt;!ELEMENT driver ( param* )&gt;
  &lt;!ATTLIST driver
            url        CDATA #REQUIRED
            class-name CDATA #IMPLIED&gt;

  &lt;!ELEMENT data-source ( param* )&gt;
  &lt;!ATTLIST data-source
            class-name CDATA #REQUIRED&gt;

  &lt;!ELEMENT jndi ANY&gt;
  &lt;!ATTLIST jndi
            name CDATA #REQUIRED&gt;

  &lt;!ELEMENT transaction-demarcation ( transaction-manager? )&gt;
  &lt;!ATTLIST transaction-demarcation
            mode CDATA #REQUIRED&gt;

  &lt;!ELEMENT transaction-manager ( param* )&gt;
  &lt;!ATTLIST transaction-manager
            name CDATA #REQUIRED&gt;
            
  &lt;!ELEMENT param EMPTY&gt;
  &lt;!ATTLIST param
            name  CDATA #REQUIRED
            value CDATA #REQUIRED&gt;

      </pre></span></td></tr></table></td></tr></table><p></p></span></p>       <a name="JDOConfFactory"><h2>JDOConfFactory</h2></a>        <p><span class="bodyGrey">Many applications need to connect to a database using varying          user accounts or database instances. To accomplish this, the utility          class <a href="api/org/exolab/castor/jdo/util/JDOConfFactory.html#JDOConfFactory">JDOConfFactory</a>          and a JDOManager.loadConfiguration(org.exolab.castor.jdo.conf.JdoConf) method    has been added to Castor.</span></p>                 <p><span class="bodyGrey">The following code snippet shows an example how to create a JDO configuration without           the use of a default XML-based database configuration file:</span></p>                 <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  private static final String DRIVER = &quot;oracle.jdbc.driver.OracleDriver&quot;;
  private static final String CONNECT = &quot;jdbc:oracle:thin:localhost:1521:SID&quot;;
  private static final String USERNAME = &quot;scott&quot;;
  private static final String PASSWORD = &quot;tiger&quot;;
  private static final String MAPPING = &quot;mapping.xml&quot;;
  private static final String DATABASE = &quot;mydb&quot;;
  private static final String ENGINE = &quot;oracle&quot;;
  
  <comment>// create driver configuration</comment>
  org.exolab.castor.jdo.conf.Driver driverConf =
      JDOConfFactory.createDriver(DRIVER, CONNECT, USERNAME, PASSWORD);
      
  <comment>// create mapping configuration</comment>
  org.exolab.castor.jdo.conf.Mapping mappingConf =
      JDOConfFactory.createMapping(getClass().getResource(MAPPING).toString());

  <comment>// create database configuration</comment>
  org.exolab.castor.jdo.conf.Database dbConf =
      JDOConfFactory.createDatabase(DATABASE, ENGINE, driverConf, mappingConf);
     
  <comment>// create and load jdo configuration</comment>
  JDOManager.loadConfiguration(JDOConfFactory.createJdoConf(dbConf));
  
  <comment>// Construct a new JDOManager for the database</comment>
  jdoManager = JDOManager.createInstance(DATABASE);
  
  <comment>// Obtain a new database</comment>
  Database db = jdoManager.getDatabase();
       </pre></span></td></tr></table></td></tr></table><p></p>         <p><span class="bodyGrey">As an alternative to using a org.exolab.castor.jdo.conf.Driver,           you can also configure Castor to use a JDBC 2.0 DataSource:</span></p>         <p></p><table width="100%" border="0" cellspacing="1" cellpadding="1" bgcolor="#7270c2"><tr><td><table width="100%" border="0" cellspacing="1" cellpadding="4" bgcolor="#dddddd"><tr><td><span class="bodyBlack"><pre>
  private static final String DS = &quot;oracle.jdbc.pool.OracleConnectionCacheImpl&quot;;
  private static final String CONNECT = &quot;jdbc:oracle:thin:localhost:1521:SID&quot;;
  private static final String USERNAME = &quot;scott&quot;;
  private static final String PASSWORD = &quot;tiger&quot;;
  private static final String MAPPING = &quot;mapping.xml&quot;;
  private static final String DATABASE = &quot;mydb&quot;;
  private static final String ENGINE = &quot;oracle&quot;;
  
  <comment>// setup properties for datasource configuration</comment>
  Properties props = new Properties();
  props.put(&quot;URL&quot;, CONNECT);
  props.put(&quot;user&quot;, USERNAME);
  props.put(&quot;password&quot;, PASSWORD);
            
  <comment>// create datasource configuration</comment>
  org.exolab.castor.jdo.conf.DataSource dsConf =
      JDOConfFactory.createDataSource(DS, props);
              
  <comment>// create mapping configuration</comment>
  org.exolab.castor.jdo.conf.Mapping mappingConf =
      JDOConfFactory.createMapping(getClass().getResource(MAPPING).toString());
        
  <comment>// create database configuration</comment>
  org.exolab.castor.jdo.conf.Database dbConf =
      JDOConfFactory.createDatabase(DATABASE, ENGINE, dsConf, mappingConf);
  
  <comment>// create and load jdo configuration</comment>
  JDOManager.loadConfiguration(JDOConfFactory.createJdoConf(dbConf));
  
  <comment>// Construct a new JDOManager for the database</comment>
  jdoManager = JDOManager.createInstance(DATABASE);
  
  <comment>// Obtain a new database</comment>
  Database db = jdoManager.getDatabase();
       </pre></span></td></tr></table></td></tr></table><p></p>      </td></tr><tr height="5"><td width="10" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td width="125" height="5" bgcolor="#7270c2" valign="top"><img src="images/dotTrans.gif" width="1" height="15" border="0"><br><img src="images/line_sm.gif" width="105" height="3" border="0" align="right"></td><td width="7" height="5" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" height="5" valign="top" align="left">&nbsp;</td><td width="120" height="5" valign="top" align="left">&nbsp;</td></tr><tr><td width="10" height="5" bgcolor="#7270c2" valign="top" align="left">&nbsp;</td><td width="125" bgcolor="#7270c2" valign="top" align="left"></td><td width="7" bgcolor="#a9a5de" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="70" valign="top" align="left"><img src="images/dotTrans.gif" width="1" height="25" border="0"></td><td width="120" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="10" rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left"><img src="images/stripes1.gif" width="10" height="125" border="0"></td><td width="125" rowspan="2" height="100%" bgcolor="#7270c2" valign="bottom" align="left"><img src="images/stripe105.gif" width="105" height="125" border="0"></td><td width="7" rowspan="2" height="100%" bgcolor="#a9a5de" valign="top" align="left">&nbsp;</td><td width="70" height="100%" valign="top" align="left">&nbsp;</td><td width="120" height="100%" valign="top" align="left">&nbsp;</td></tr><tr height="5"><td width="70" height="25" valign="top" align="left">&nbsp;</td><td width="400" height="25" valign="bottom" align="left"><br><br><img src="images/line_light.gif" border="0" width="400" height="3"><br><p></p><span class="bodyGrey"><small><notice>     Copyright &copy; 1999-2005 <a href="http://www.exolab.org">ExoLab Group</a>, Intalio Inc.,     and Contributors.  All rights reserved.   </notice><br>&nbsp;<br></small><small><notice>     Java, EJB, JDBC, JNDI, JTA, Sun, Sun Microsystems are trademarks or registered     trademarks of Sun Microsystems, Inc. in the United States and in other     countries. XML, XML Schema, XSLT and related standards are trademarks or registered     trademarks of MIT, INRIA, Keio or others, and a product of the World Wide Web     Consortium. All other product names mentioned herein are trademarks of their respective     owners.   </notice><br>&nbsp;<br></small></span><p></p>&nbsp;</td><td width="120" height="25" valign="top" align="left">&nbsp;</td></tr></table></body></html>